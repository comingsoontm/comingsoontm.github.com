<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coming Soon</title>
    <!-- fonts import -->
    <link rel="stylesheet" href="https://fonts.nexuspipe.com/api/v1/download/Inter.css">
    <!-- 3js -->
    <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>
    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@v0.155.0/build/three.module.js",
          "three/addons/": "https://unpkg.com/three@v0.155.0/examples/jsm/"
        }
      }
    </script>
    <script defer type="module" lang="js">
      import * as THREE from 'three';
      import { EffectComposer } from 'three/addons/postprocessing/EffectComposer.js';
      import { RenderPass } from 'three/addons/postprocessing/RenderPass.js';
      import { SavePass } from 'three/addons/postprocessing/SavePass.js';
      import { ShaderPass } from 'three/addons/postprocessing/ShaderPass.js';
      import { BlendShader } from 'three/addons/shaders/BlendShader.js';

      const scene = new THREE.Scene();
      
      const fov = 75;
      const near = 0.1;
      const far = 100;
      let ratio = window.innerWidth / window.innerHeight;
      const camera = new THREE.PerspectiveCamera( fov, ratio, near, far );

      scene.background = new THREE.Color( 'black' );

      const renderer = new THREE.WebGLRenderer();
      renderer.shadowMap.enabled = true;
      renderer.setPixelRatio(window.devicePixelRatio);
      renderer.setSize( window.innerWidth, window.innerHeight );
      document.body.appendChild( renderer.domElement );

      const geometry = new THREE.BoxGeometry( 1, 1, 1 );
      const material = new THREE.MeshLambertMaterial( {
        color: 0x77aaff,
      } );
      const cube = new THREE.Mesh( geometry, material );
      scene.add( cube );

      const geometry2 = new THREE.BoxGeometry( 1,1,2 );
      const cube2 = new THREE.Mesh( geometry2, material );
      cube2.position.x=-3
      cube2.position.z=-3
      scene.add( cube2 );

      const lightColour = 0xFFFFFF;
      {
        const intensity = 3;
        const light = new THREE.DirectionalLight(lightColour, intensity);
        light.position.set(0, 3, 0);
        light.target.position.set(0, 0, 0);
        scene.add(light);
        scene.add(light.target);
      }

      {
        const intensity = 2;
        const light = new THREE.AmbientLight(lightColour, intensity);
        light.position.set(0, 3, 0);
        scene.add(light);
      }

      camera.position.z = 5;

      let last = Date.now()/1000;

      let c2dX = 1;
      let c2dY = 1;
      const rngT = 0.95

      
      // skidded shader!
      // Post-processing inits
      const composer = new EffectComposer(renderer);

      // render pass
      const renderPass = new RenderPass(scene, camera);

      const renderTargetParameters = {
        minFilter: THREE.LinearFilter,
        magFilter: THREE.LinearFilter,
        stencilBuffer: false
      };

      // save pass
      const savePass = new SavePass(
        new THREE.WebGLRenderTarget(
          window.innerWidth,
          window.innerHeight,
          renderTargetParameters
        )
      );

      // blend pass
      const blendPass = new ShaderPass(BlendShader, "tDiffuse1");
      blendPass.uniforms["tDiffuse2"].value = savePass.renderTarget.texture;
      blendPass.uniforms["mixRatio"].value = 0.8;

      // output pass
      const outputPass = new ShaderPass(THREE.CopyShader);
      outputPass.renderToScreen = true;

      // adding passes to composer
      composer.addPass(renderPass);
      composer.addPass(blendPass);
      composer.addPass(savePass);
      composer.addPass(outputPass);
      // back to not skidded

      // main loop
      const animate = () => {
        const now = Date.now()/1000;
        const delta = now - last;
        last = now;
        const fps = 1/delta;
        cube.rotation.x += 0.01;
        cube.rotation.y += 0.01;
        cube.rotation.z += Math.random()/fps;
        cube2.position.x += c2dX*(Math.random()/fps);
        if (cube2.position.x > 10 || (cube2.position.x > 3 && Math.random() > rngT)) {
          c2dX=-1;
        } else if (cube2.position.x < -10 || (cube2.position.x < -3 && Math.random() > rngT)) {
          c2dX=1;
        };
        cube2.position.y += c2dY*(Math.random()/fps);
        if (cube2.position.y > 10 || (cube2.position.y > 3 && Math.random() > rngT)) {
          c2dY=-1;
        } else if (cube2.position.y < -10 || (cube2.position.y < -3 && Math.random() > rngT)) {
          c2dY=1;
        };
        cube2.rotation.y += delta;
        cube2.rotation.z += Math.random()/(fps/2);
        const rt = window.innerWidth / window.innerHeight;
        if (ratio !== rt){
          ratio = rt;
          camera.aspect = rt;
          camera.updateProjectionMatrix();
          renderer.setSize( window.innerWidth, window.innerHeight );
        }
        requestAnimationFrame( animate );
        renderer.render( scene, camera );
      }
      animate();
    </script>
    <!-- styles -->
    <style>
      body {
        margin: 0 0;
        width: 100vw;
        height: 100vh;
        background: #1a1a1a;
        color: #dedede;
        font-family: Inter, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      }
      .center {
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
      }
      ._100vh {
        height: 100vh;
      }
      ._100vw {
        width: 100vw;
      }
      .main {
        position: fixed;
        top: 0;
        left: 0;
        z-index: 10;
      }
      .main .inner {
        background: #1a1a1aaa;
        padding: 16px;
        border-radius: 8px;
        backdrop-filter: blur(16px);
      }
      h2,p {
        margin: 0 0;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <div class="main center _100vh _100vw">
      <div class="inner">
        <h2 style="margin-bottom: 0.3em;">Coming Soon!</h2>
        <p>Whatever you just clicked on â€” it's coming soon&trade;</p>
      </div>
    </div>
  </body>
</html>